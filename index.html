<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Forest Magic — Сила Алтая</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* 
========================================
1. ОСНОВНЫЕ НАСТРОЙКИ
========================================
*/
html { scroll-behavior: smooth; }
body {
  margin: 0; padding: 0;
  font-family: 'Segoe UI', Roboto, sans-serif;
  background-color: #020403; color: #e6e6e6;
  overflow-x: hidden;
}

/* ФИКСИРОВАННЫЙ ФОН */
.bg-fix {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2;
  background: linear-gradient(180deg, rgba(6,16,12,0.92) 0%, rgba(2,4,3,0.98) 100%), 
              url('https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=2000&auto=format&fit=crop');
  background-size: cover; background-position: center;
}

#progress-bar {
  position: fixed; top: 0; left: 0; width: 0%; height: 4px;
  background: #7fbfa2; z-index: 200;
}

/* 
========================================
2. АНИМАЦИИ УДАРА И ПАДЕНИЯ
========================================
*/

/* Тряска всего тела */
@keyframes mega-shake {
  0% { transform: translate(0,0); }
  10% { transform: translate(-15px,-15px); }
  20% { transform: translate(15px,15px); }
  30% { transform: translate(-15px,15px); }
  40% { transform: translate(15px,-15px); }
  100% { transform: translate(0,0); }
}
.shake-active { animation: mega-shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }

/* Вспышка на весь экран */
@keyframes white-flash {
  0% { background: transparent; }
  50% { background: rgba(255,255,255,0.4); }
  100% { background: transparent; }
}
.flash-active { animation: white-flash 0.4s ease-out; }

/* Падение гриба (вылетает из темноты сверху) */
@keyframes mushroom-impact-fall {
  0% { transform: translate(-50%, -200px) scale(1) rotate(0deg); opacity: 0; }
  10% { opacity: 1; transform: translate(-50%, -100px) scale(1.2) rotate(-10deg); } /* Подскок */
  100% { transform: translate(-50%, 150vh) scale(0.8) rotate(40deg); opacity: 0; } /* Провал вниз */
}
.animate-mushroom-fall {
  display: block !important;
  animation: mushroom-impact-fall 1.5s cubic-bezier(0.5, 0, 0.5, 1) forwards;
}

/* 
========================================
3. ГРИБ И ГЕРОЙ
========================================
*/
.container { max-width: 1100px; margin: auto; padding: 140px 20px; text-align: center; position: relative; z-index: 10; }

.mushroom-box {
  position: relative; width: 200px; height: 260px;
  margin: 40px auto; z-index: 50; transition: opacity 0.5s;
}
.cap { position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 200px; height: 110px; background: radial-gradient(circle at 50% 30%, #ff5a5a, #8b0d0d); border-radius: 100px 100px 70px 70px; box-shadow: 0 0 80px rgba(255,80,80,0.5); }
.cap::before { content: ""; position: absolute; inset: 0; background: radial-gradient(circle at 20% 40%, #fff 6px, transparent 7px), radial-gradient(circle at 75% 35%, #fff 6px, transparent 7px); opacity: 0.9; }
.stem { position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 70px; height: 160px; background: linear-gradient(180deg, #f4f1e8, #cfc7b8); border-radius: 40px; }

.floating { animation: float-anim 7s ease-in-out infinite; }
@keyframes float-anim { 50% { transform: translateY(-25px); } }

/* Призрачный гриб, который будет падать */
#falling-mushroom-element {
  position: fixed; left: 50%; top: 0; z-index: 1000; display: none;
}

/* 
========================================
4. БЛОК СТОЛКНОВЕНИЯ (РУКОПОЖАТИЕ СКАЛ)
========================================
*/
.impact-section { margin-top: 250px; position: relative; }

.collision-wrapper {
  display: flex; justify-content: center; align-items: stretch;
  perspective: 2000px; position: relative; padding: 60px 0; gap: 0;
}

.rock {
  width: 50%; padding: 50px;
  background: rgba(255, 255, 255, 0.05);
  border: 2px solid rgba(127,191,162,0.3);
  backdrop-filter: blur(20px); opacity: 0;
  transition: transform 0.8s cubic-bezier(0.17, 0.89, 0.32, 1.3), opacity 0.5s;
}

.rock-left {
  border-radius: 30px 0 0 30px; border-right: none;
  transform: translateX(-150%) rotateY(45deg);
}
.rock-right {
  border-radius: 0 30px 30px 0; border-left: none;
  transform: translateX(150%) rotateY(-45deg);
}

/* Состояние при ударе */
.active-impact .rock-left, .active-impact .rock-right {
  opacity: 1; transform: translateX(0) rotateY(0);
}

/* Линия разлома/энергии */
.impact-line {
  position: absolute; left: 50%; top: 0; bottom: 0;
  width: 4px; background: #7fbfa2; z-index: 10;
  box-shadow: 0 0 40px #7fbfa2, 0 0 80px #7fbfa2;
  opacity: 0; transform: scaleY(0); transition: 0.4s;
}
.active-impact .impact-line {
  opacity: 1; transform: scaleY(1); transition-delay: 0.7s;
}

/* 
========================================
5. КАТАЛОГ И СЕТКИ
========================================
*/
section { margin-top: 180px; }
.reveal { opacity: 0; transform: translateY(50px); transition: 1.2s cubic-bezier(0.2, 0.6, 0.2, 1); }
.reveal.active { opacity: 1; transform: translateY(0); }

.grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-top: 50px; }
.card-pro {
  padding: 40px; border-radius: 25px;
  background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(127,191,162,0.2);
  backdrop-filter: blur(10px); transition: 0.4s;
}
.card-pro:hover { transform: translateY(-10px); border-color: #7fbfa2; }

/* КАТАЛОГ */
.catalog-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; margin-top: 50px; }
.product-card {
  position: relative; padding: 30px; border-radius: 25px; text-align: left;
  background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(127,191,162,0.15);
  transition: 0.4s; min-height: 250px; display: flex; flex-direction: column; cursor: pointer;
}
.product-card:hover { border-color: #7fbfa2; background: rgba(127,191,162,0.06); transform: translateY(-10px); }
.badge { position: absolute; top: 15px; right: 15px; padding: 5px 12px; background: #7fbfa2; color: #000; font-size: 11px; font-weight: bold; border-radius: 50px; }
.price { font-size: 20px; font-weight: bold; margin-top: auto; color: #fff; }
.price span { font-size: 14px; text-decoration: line-through; opacity: 0.4; margin-right: 10px; }

/* 
========================================
6. ПОРТАЛ И ПРОЧЕЕ
========================================
*/
nav { position: fixed; top: 0; width: 100%; background: rgba(5,15,10,0.9); backdrop-filter: blur(15px); z-index: 150; border-bottom: 1px solid rgba(127,191,162,0.1); }
nav ul { display: flex; justify-content: center; gap: 30px; list-style: none; padding: 18px; margin: 0; }
nav a { color: #cfe6dc; text-decoration: none; font-size: 13px; letter-spacing: 2px; text-transform: uppercase; }

.portal { position: fixed; inset: 0; background: #000; display: flex; align-items: center; justify-content: center; flex-direction: column; opacity: 0; pointer-events: none; transition: 0.8s; z-index: 1000; }
.portal.active { opacity: 1; pointer-events: all; }
.portal-circle { width: 150px; height: 150px; border-radius: 50%; border: 2px solid #7fbfa2; animation: portal-p 1.5s infinite; }
@keyframes portal-p { 0% { transform: scale(0.8); opacity: 0.5; } 100% { transform: scale(1.5); box-shadow: 0 0 100px #7fbfa2; opacity: 0; } }

/* Мобилки */
@media (max-width: 768px) {
  .rock { width: 100%; border-radius: 25px; margin-bottom: 20px; transform: translateX(0) !important; opacity: 1; }
  .collision-wrapper { flex-direction: column; }
  .impact-line { display: none; }
}
</style>
</head>
<body id="body-wrap">

<div id="progress-bar"></div>
<div class="bg-fix"></div>

<!-- Падающий гриб -->
<div id="falling-mushroom-element" class="mushroom-box">
  <div class="cap"></div>
  <div class="stem"></div>
</div>

<nav>
  <ul>
    <li><a href="#home">Главная</a></li>
    <li><a href="#catalog">Каталог</a></li>
    <li><a href="#impact">Сила</a></li>
    <li><a href="#reviews">Отзывы</a></li>
  </ul>
</nav>

<div class="container" id="home">
  <!-- Гриб на главной -->
  <div class="mushroom-box floating" id="hero-mushroom">
    <div class="cap"></div>
    <div class="stem"></div>
  </div>
  
  <h1 class="reveal">Forest Magic</h1>
  <p class="reveal" style="font-size: 20px; color: #adc9bd;">Глубинный микродозинг из сердца Алтайской тайги.</p>
  <div class="btn reveal" style="display:inline-block; margin-top: 30px; border: 1px solid #7fbfa2; padding: 15px 40px; border-radius: 50px; cursor: pointer;" onclick="portalTelegram()">Открыть Бот</div>

  <!-- Блок: Эффекты -->
  <section id="effects" class="reveal">
    <h2>6 Граней Силы</h2>
    <div class="grid">
      <div class="card-pro">☽ Глубокий сон</div>
      <div class="card-pro">✦ Без привычек</div>
      <div class="card-pro">◉ Стойкость</div>
      <div class="card-pro">❍ Баланс</div>
      <div class="card-pro">✧ Ясность</div>
      <div class="card-pro">◈ Тишина</div>
    </div>
  </section>

  <!-- БЛОК СТОЛКНОВЕНИЯ (РУКОПОЖАТИЕ) -->
  <section class="impact-section" id="impact">
    <h2 class="reveal">Слияние Духа и Тела</h2>
    <div class="collision-wrapper" id="impact-trigger">
      <div class="impact-line"></div>
      
      <div class="rock rock-left">
        <h3>Ментальное</h3>
        <p>✦ Ясность ума<br>✦ Остановка диалога<br>✦ Творческий поток<br>✦ Уверенность</p>
      </div>

      <div class="rock rock-right">
        <h3>Физическое</h3>
        <p>✦ Тонус тела<br>✦ Энергия Алтая<br>✦ Здоровый сон<br>✦ Легкость</p>
      </div>
    </div>
  </section>

  <!-- КАТАЛОГ -->
  <section id="catalog" class="reveal">
    <h2>Витрина Леса</h2>
    <div class="catalog-grid">
      <div class="product-card" onclick="portalTelegram()">
        <span class="badge">Хит</span>
        <strong>Красный мухомор</strong>
        <p style="font-size: 13px; opacity: 0.7;">Цельные шляпки ручного сбора</p>
        <div class="price"><span>1 990 ₽</span> 1 590 ₽</div>
      </div>
      <div class="product-card" onclick="portalTelegram()">
        <span class="badge" style="background:#ff5a5a">Акция</span>
        <strong>Пантерный мухомор</strong>
        <p style="font-size: 13px; opacity: 0.7;">Мощный экстракт 10:1</p>
        <div class="price"><span>4 200 ₽</span> 3 450 ₽</div>
      </div>
      <div class="product-card" onclick="portalTelegram()">
        <strong>Микродозинг</strong>
        <p style="font-size: 13px; opacity: 0.7;">60 капсул для курса 30 дней</p>
        <div class="price">2 300 ₽</div>
      </div>
    </div>
  </section>

  <!-- ОТЗЫВЫ -->
  <section id="reviews" class="reveal">
    <h2>Голоса</h2>
    <div class="grid">
      <div class="card-pro">«Сон наладился через неделю. Такого покоя я не чувствовал давно.»</div>
      <div class="card-pro">«Пантерный дает нереальный фокус. Работа летит.»</div>
    </div>
  </section>

  <footer style="margin-top: 150px; opacity: 0.4; font-size: 12px; padding-bottom: 50px;">
    FOREST MAGIC © 2025. НЕ ЯВЛЯЕТСЯ ЛЕКАРСТВОМ. 18+
  </footer>
</div>

<!-- Портал -->
<div class="portal" id="portal-wrap">
  <div class="portal-circle"></div>
  <p style="margin-top: 30px; letter-spacing: 4px;">ПЕРЕХОД...</p>
</div>

<script>
// Наблюдатель скролла
const revealObs = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) entry.target.classList.add('active');
  });
}, { threshold: 0.1 });
document.querySelectorAll('.reveal').forEach(el => revealObs.observe(el));

// ЛОГИКА УДАРА И ПАДЕНИЯ ГРИБА
const impactTrigger = document.getElementById('impact-trigger');
const heroMush = document.getElementById('hero-mushroom');
const fallingMush = document.getElementById('falling-mushroom-element');
const bodyWrap = document.getElementById('body-wrap');

let impactHappened = false;

const impactObs = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting && !impactHappened) {
      impactHappened = true;
      entry.target.classList.add('active-impact');
      
      // Момент удара скал (через 0.7-0.8 сек)
      setTimeout(() => {
        // 1. Тряска экрана
        bodyWrap.classList.add('shake-active');
        // 2. Световая вспышка
        bodyWrap.classList.add('flash-active');
        
        // 3. Гриб на главной исчезает
        heroMush.style.opacity = '0';
        
        // 4. Падающий гриб летит из темноты сверху
        fallingMush.classList.add('animate-mushroom-fall');
        
        setTimeout(() => {
          bodyWrap.classList.remove('shake-active');
          bodyWrap.classList.remove('flash-active');
        }, 600);
      }, 750);
    }
  });
}, { threshold: 0.5 });
impactObs.observe(impactTrigger);

// Прогресс-бар
window.onscroll = () => {
  let scroll = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
  document.getElementById("progress-bar").style.width = scroll + "%";
};

// Портал
function portalTelegram() {
  const p = document.getElementById('portal-wrap');
  p.classList.add('active');
  setTimeout(() => {
    window.open('https://t.me/Altai_Amanita_bot', '_blank');
    setTimeout(() => p.classList.remove('active'), 1000);
  }, 1200);
}

// Споры
for(let i=0; i<30; i++) {
  let s = document.createElement('div');
  s.style.cssText = `position:fixed; width:2px; height:2px; background:rgba(200,255,230,0.4); border-radius:50%; left:${Math.random()*100}vw; top:110vh; z-index:-1; pointer-events:none;`;
  document.body.appendChild(s);
  s.animate([{transform: 'translateY(0)'}, {transform: 'translateY(-120vh)'}], {
    duration: Math.random() * 5000 + 10000,
    iterations: Infinity,
    delay: Math.random() * 10000
  });
}
</script>

</body>
</html>
